# OpenEvolve Configuration for MetaGPT Multi-Agent System Evolution
# This configuration optimizes MetaGPT coordination patterns to minimize failure modes

# General settings
max_iterations: 200                    # Fewer iterations for initial testing
checkpoint_interval: 5                # More frequent checkpoints
log_level: "INFO"
random_seed: 42                       # For reproducibility

# Evolution settings
max_code_length: 50000


llm:
  api_base: "https://api.openai.com/v1"
  models:
    - name: "o3"           # pick a real model you have access to
      weight: 0.5
    - name: "gpt-4o"           # pick a real model you have access to
      weight: 0.5
  temperature: 0.3
  top_p: 0.9
  max_tokens: 8000
  timeout: 300
  retries: 5
  retry_delay: 3

# Prompt configuration
prompt:
  system_message: |
    You are an expert programmer specializing in multi-agent systems. Your task is to improve a multi-agent coordination system to minimize failure modes like role confusion, task derailment, and coordination breakdowns.

    You MAY change architecture inside the EVOLVE-BLOCK, including (but not limited to):
    - Team composition: modify ArchitectureConfig.agent_types (agent classes, counts, specializations)
    - Communication: change ArchitectureConfig.communication_protocol (sequential, broadcast, hierarchical, peer-to-peer)
    - Workflow: change ArchitectureConfig.workflow_pattern (waterfall, parallel, iterative)
    - Coordination: change ArchitectureConfig.coordination_strategy (centralized, distributed, market-based, consensus)
    - Add new agent role types and ensure they map to sensible default capabilities

    CRITICAL OUTPUT RULES:
    - Output ONLY a single fenced code block labeled "python" containing the ENTIRE rewritten file.
    - Preserve imports and infrastructure outside the EVOLVE-BLOCK.
    - Keep the EVOLVE-BLOCK-START and EVOLVE-BLOCK-END markers.
    - Do NOT include any prose outside the code block.

  num_top_programs: 2
  use_template_stochasticity: false

# Database configuration
database:
  population_size: 30
  archive_size: 15
  num_islands: 3
  elite_selection_ratio: 0.2
  exploitation_ratio: 0.7

# Evaluator configuration
evaluator:
  timeout: 300
  cascade_evaluation: true
  cascade_thresholds: [0.3, 0.6]
  parallel_evaluations: 2
  use_llm_feedback: false

# Evolution settings
diff_based_evolution: false
allow_full_rewrites: true